jQuery.expr[":"].Contains=function(a,b,c){return(a.textContent||a.innerText||"").toUpperCase().indexOf(c[3].toUpperCase())>=0},function(a){"use strict";a.fn.fancySelect=function(b){function c(a){return this.select=a,this.container=b.generateContainer(),this.results=b.generateResultsContainer().css({position:"absolute",display:"none"}),this.init()}return b=jQuery.extend({containerClass:"fancy-select",resultsClass:"fancy-select-results",placeholderClass:"fancy-select-replaced",itemHoverClass:"fancy-select-hover",selectOpenClass:"fancy-select-open",selectHoverClass:"fancy-select-hovered",allowTextFilter:!1,onItemEnter:function(){a(this).addClass(b.itemHoverClass)},onItemLeave:function(){a(this).removeClass(b.itemHoverClass)},onOptionSelect:function(){},onSelectOpen:function(){a(this).addClass(b.selectOpenClass),a(this).siblings(b.getResultsSelector()).show()},onSelectClose:function(){a(this).siblings(b.getResultsSelector()).hide(),a(this).removeClass(b.selectOpenClass)},onSelectEnter:function(){a(this).addClass(b.selectHoverClass)},onSelectLeave:function(){a(this).removeClass(b.selectHoverClass)},getResultsSelector:function(){return"."+b.resultsClass},getPlaceholderSelector:function(){return"."+b.placeholderClass},generateResultsContainer:function(){return a("<div></div>").addClass(b.resultsClass)},generatePlaceholderContainer:function(){return a("<div></div>").addClass(b.placeholderClass)},generateReplacedRow:function(b){return a("<li />").text(a(b).text()).data("value",a(b).val())},generateFilterInput:function(){return a('<input type="text" />').addClass("fancy-placeholder fancy-placeholder-input")},generateContainer:function(){return a("<div></div>").addClass(b.containerClass)}},b),a(document).click(function(c){void 0===c&&(c=window.event),a(c.target).parents(b.getResultsSelector()).length>0||a(c.target).parents(b.getPlaceholderSelector()).length>0||a(b.getPlaceholderSelector()).each(function(){b.onSelectClose.call(this)})}),a(document).keydown(function(c){/38|40|13/.test(c.keyCode)&&a(b.getResultsSelector()).filter(":visible").each(function(){var d,e=40,f=13;if(d=a("li",this).filter(":visible").filter("."+b.itemHoverClass),d.length<1)return c.keyCode==e&&b.onItemEnter.call(d.first()),void 0;if(c.keyCode==f)return a(d).click(),c.preventDefault();var g=a("li:visible",this),h=g.index(a(d).get(0)),i=h+(c.keyCode==e?1:-1);i>0&&i<g.length&&(b.onItemLeave.call(d),b.onItemEnter.call(a("li:visible",this).eq(i)))})}),c.prototype.init=function(){var c,d=a("<ul></ul>"),e=this;return this.select.children("option").each(function(c,e){d.append(b.generateReplacedRow(a(e)))}),this.results.append(d),c=a("option:selected",this.select),this.placeholder_p=a('<p class="fancy-placeholder fancy-placeholder-text"></p>').append(c.text()).data("default",c.text()),this.placeholder=b.generatePlaceholderContainer(b).click(function(){var c=e.results.is(":hidden");a(b.getPlaceholderSelector()).each(function(){b.onSelectClose.call(this)}),c&&(b.onSelectOpen.call(this),b.allowTextFilter&&e.focus())}).hover(function(){b.onSelectEnter.call(this)},function(){b.onSelectLeave.call(this)}).append(this.placeholder_p),b.allowTextFilter&&this.placeholder.append(this.createFilterInput()),this.container.append(this.placeholder),this.container.append(this.results),this.container.append(this.val),this.container.hide(),this.select.after(this.container),this.select.hide(),this.container.show(),this},c.prototype.setSelectedItem=function(c){if(b.allowTextFilter){var d=this.placeholder.find(".fancy-placeholder-input");d.clearingOnSelection=!0,d.blur(),d.clearingOnSelection=!1,d.val("")}this.placeholder.find(".fancy-placeholder-text").text(a(c).text()),this.select.val(a(c).data("value"))},c.prototype.focus=function(){a(this.placeholder).find("input").focus()},c.prototype.createFilterInput=function(){var c=this;return this.input=b.generateFilterInput(c),this.input.keydown(function(a){/37|38|39|40|13/.test(a.keyCode)||c.placeholder_p.text(""),c.results.is(":hidden")&&b.onSelectOpen.call(c.placeholder)}).keyup(function(){var d=a(this).val().replace(/[\(|\)]/gi,"");if(d.length<1)c.placeholder_p.text(c.placeholder_p.data("default")),a("li",c.results).show();else{c.placeholder_p.text(""),a("li:not(:Contains("+d+"))",c.results).hide().removeClass(b.itemHoverClass);var e=a("li:Contains("+d+")",c.results);e.show(),a(":first",e).addClass(b.itemHoverClass)}a("li."+b.itemHoverClass+":hidden",c.results).each(function(){b.onItemLeave(this)})}).blur(function(){a(this).val()<1&&!this.clearingOnSelection&&c.placeholder_p.text(c.placeholder_p.data("default"))}),c.input.attr("tabIndex",c.select.tabIndex),c.input},this.each(function(){var d=a(this),e=new c(d),f=e.results;a("li",f).click(function(a){return e.setSelectedItem(this),b.onOptionSelect.call(this),b.onSelectClose.call(e.placeholder),a.preventDefault()}).hover(function(){a("li:visible",f).each(function(){b.onItemLeave.call(this)}),b.onItemEnter.call(this)},function(){b.onItemLeave.call(this)})})}}(jQuery);